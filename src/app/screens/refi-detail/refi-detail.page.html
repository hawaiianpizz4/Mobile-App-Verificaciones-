<!-- <div id="map"></div> -->
<ion-content>
  <div class="header">
    <ion-buttons>
      <ion-button routerLink="/home/listing">
        <ion-icon slot="icon-only" name="arrow-back" color="light"></ion-icon>
      </ion-button>
    </ion-buttons>
  </div>

  <div class="card">
    <div class="card-content">
      <!-- <form (submit)="submitForm($event)" novalidate [formGroup]="dataForm" (ngSubmit)="submitForm()"> -->
      <form [formGroup]="dataForm" (ngSubmit)="submitForm()">
        <ion-accordion-group>
          <ion-accordion value="datosRefi">
            <ion-item slot="header" color="light">
              <ion-label>Datos Refinanciamiento</ion-label>
            </ion-item>

            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Fecha Refinanciación</ion-label>
                <ion-input
                  value="{{this.currentDate}}"
                  formControlName="refi_fecha"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Nombre de Refinanciador</ion-label
                >
                <ion-input
                  value="{{this.nombreUsuario}}"
                  formControlName="refi_usuario"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Número de Operacion</ion-label>
                <ion-input
                  formControlName="refi_operacion"
                  value="{{this.operacion}}"
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Número de Autorización</ion-label
                >
                <ion-input
                  formControlName="refi_autorizacion"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Número de Autorización Original</ion-label
                >
                <ion-input
                  formControlName="refi_autorizacion_original"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Plazo(meses)</ion-label>
                <ion-select
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="refi_plazo"
                >
                  <ion-select-option value="3">3</ion-select-option>
                  <ion-select-option value="6">6</ion-select-option>
                  <ion-select-option value="9">9</ion-select-option>
                  <ion-select-option value="12">12</ion-select-option>
                  <ion-select-option value="15">15</ion-select-option>
                  <ion-select-option value="18">18</ion-select-option>
                  <ion-select-option value="24">24</ion-select-option>
                  <ion-select-option value="32">32</ion-select-option>
                  <ion-select-option value="48">48</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Valor Cuota</ion-label>
                <ion-input
                  formControlName="refi_valor_cuota"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Fecha Primer Pago</ion-label>
                <ion-input value="{{this.selectedDatePrimerPago}}"></ion-input>

                <ion-datetime
                  [mode]="'ios'"
                  displayFormat="DD/MM/YYYY"
                  (ionChange)="dateChangedPrimerPago($event)"
                ></ion-datetime>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Pago de Gastos Administrativos</ion-label
                >
                <ion-input
                  formControlName="refi_pago_gastos_admin"
                  value=""
                  type="number"
                ></ion-input>

                <ion-button (click)="addPhotoToGallery()">
                  Capturar Comprobante
                </ion-button>

                <ion-grid>
                  <ion-row>
                    <ion-col
                      size="6"
                      *ngFor="let photo of photoService.photos; index as position"
                    >
                      <ion-img [src]="photo.webviewPath"></ion-img>
                    </ion-col>
                  </ion-row>
                </ion-grid>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Total Reestructuración</ion-label
                >
                <ion-input
                  formControlName="refi_total_reest"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Total a Pagar</ion-label>
                <ion-input
                  formControlName="refi_total_pagar"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="datosPersonales">
            <ion-item slot="header" color="light">
              <ion-label>Datos Personales</ion-label>
            </ion-item>

            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Cédula/ID</ion-label>
                <ion-input
                  formControlName="cliente_cedula"
                  value="{{this.id}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nombres Completos</ion-label>
                <ion-input
                  formControlName="cliente_nombres"
                  value="{{getdata.nombres}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nacionalidad</ion-label>
                <ion-input
                  formControlName="cliente_nacionalidad"
                  value="{{getdata.nacionalidad}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Ciudad Nacimiento</ion-label>
                <ion-input
                  formControlName="cliente_ciudad_nacimiento"
                  type="text"
                  value="{{getdata.cod_cant_nacim}}"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Fecha Nacimiento</ion-label>
                <ion-input
                  formControlName="cliente_fecha_nacimiento"
                  value="{{getdata.fecha_naci}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Sexo</ion-label>

                <ion-select
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="cliente_sexo"
                  value="{{getdata.des_sexo}}"
                >
                  <ion-select-option value="M">Masculino</ion-select-option>
                  <ion-select-option value="F">Femenino</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nivel Educativo</ion-label>
                <ion-select
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="cliente_nivel_educativo"
                >
                  <ion-select-option value="0">Ninguna</ion-select-option>
                  <ion-select-option value="1">Primaria</ion-select-option>
                  <ion-select-option value="2">Secundaria</ion-select-option>
                  <ion-select-option value="3">Técnica</ion-select-option>
                  <ion-select-option value="4">Superior</ion-select-option>
                  <ion-select-option value="5">Posgrado</ion-select-option>
                  <ion-select-option value="6">Uso Futuro</ion-select-option>
                  <ion-select-option value="7"
                    >Universit. Imcopm</ion-select-option
                  >
                  <ion-select-option value="8">Universitario</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Profesión</ion-label>
                <ion-input
                  formControlName="cliente_profesion"
                  value="{{getdata.des_profes}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Estado Civil</ion-label>
                <ion-select
                  (ionChange)="handleChange($event)"
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="cliente_estado_civil"
                >
                  <ion-select-option value="C">Casado(a)</ion-select-option>
                  <ion-select-option value="D">Divorciado(a)</ion-select-option>
                  <ion-select-option value="E">Empresarial</ion-select-option>
                  <ion-select-option value="N">No Definido</ion-select-option>
                  <ion-select-option value="S">Soltero(a)</ion-select-option>
                  <ion-select-option value="U">Unión Libre</ion-select-option>
                  <ion-select-option value="V">Viudo(a)</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Número Dependientes</ion-label>
                <ion-input
                  formControlName="cliente_numero_dependientes"
                  value="{{getdata.num_hijos}}"
                  type="number"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="Ubicacion">
            <ion-item slot="header" color="light">
              <ion-label>Ubicación del Cliente</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Dirección</ion-label>
                <ion-input
                  formControlName="dir_direccion_exacta"
                  value=""
                  type="text"
                ></ion-input>

                <div id="map"></div>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Provincia</ion-label>
                <ion-input
                  formControlName="dir_provincia"
                  value="{{getdata.cod_prov_dom}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Cantón/Ciudad</ion-label>
                <ion-input
                  formControlName="dir_canton_ciudad"
                  value="{{getdata.cod_cant_dom}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Parroquia</ion-label>
                <ion-input
                  formControlName="dir_parroquia"
                  value="{{getdata.cod_parr_dom}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Dirección</ion-label>
                <ion-input
                  formControlName="dir_direccion"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Calle Transversal</ion-label>
                <ion-input
                  formControlName="dir_calle_transversal"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Número</ion-label>
                <ion-input
                  formControlName="dir_numero"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Latitud</ion-label>
                <ion-input
                  formControlName="dir_latitud"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Longitud</ion-label>
                <ion-input
                  formControlName="dir_longitud"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Referencia</ion-label>
                <ion-input
                  formControlName="dir_referencia"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Tipo Vivienda</ion-label>
                <ion-select
                  (ionChange)="handleChange($event)"
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="dir_tipo_vivienda"
                >
                  <ion-select-option value="P">PROPIA</ion-select-option>
                  <ion-select-option value="A">ARRENDADA</ion-select-option>
                  <ion-select-option value="F"
                    >VIVE CON FAMILIARES</ion-select-option
                  >
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Tiempo Residencia</ion-label>
                <ion-input
                  formControlName="dir_tiempo"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #1</ion-label>
                <ion-input
                  formControlName="dir_telf_1"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #2</ion-label>
                <ion-input
                  formControlName="dir_telf_2"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Email</ion-label>
                <ion-input
                  formControlName="dir_email"
                  value=""
                  type="email"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Nombre Arrendador/Familiar</ion-label
                >
                <ion-input
                  formControlName="dir_nombre_arrendador"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating"
                  >Teléfono Arrendador/Familiar</ion-label
                >
                <ion-input
                  formControlName="dir_telf_arrendador"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="datosConyuge">
            <ion-item slot="header" color="light">
              <ion-label>Datos de Cónyuge</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Cédula</ion-label>
                <ion-input
                  formControlName="conyuge_cedula"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nombres Completos</ion-label>
                <ion-input
                  formControlName="conyuge_nombres"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Email</ion-label>
                <ion-input
                  formControlName="conyuge_email"
                  value=""
                  type="email"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Telefono #1</ion-label>
                <ion-input
                  formControlName="conyuge_telf_1"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Telefono #2</ion-label>
                <ion-input
                  formControlName="conyuge_telf_2"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="actividadConyuge">
            <ion-item slot="header" color="light">
              <ion-label>Actividad Económica de Cónyuge</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Tipo de Económica</ion-label>
                <ion-select
                  (ionChange)="handleChange($event)"
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="conyuge_tipo_actividad"
                >
                  <ion-select-option value="DEP">DEPENDENCIA</ion-select-option>
                  <ion-select-option value="IND"
                    >INDEPENDIENTE</ion-select-option
                  >
                  <ion-select-option value="CES">CESANTE</ion-select-option>
                  <ion-select-option value="INF">INFORMAL</ion-select-option>
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nombre Empresa</ion-label>
                <ion-input
                  formControlName="conyuge_nombre_empresa"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Actividad Empresa</ion-label>
                <ion-input
                  formControlName="conyuge_actividad_empresa"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Cargo</ion-label>
                <ion-input
                  formControlName="conyuge_cargo"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono</ion-label>
                <ion-input
                  formControlName="conyuge_telefono_empresa"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Ingresos Mensuales</ion-label>
                <ion-input
                  formControlName="conyuge_ingresos_mensuales"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="ref1">
            <ion-item slot="header" color="light">
              <ion-label>Referencia #1</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Nombres Completos</ion-label>
                <ion-input
                  formControlName="ref1_nombres"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Parentesco</ion-label>
                <ion-input
                  formControlName="ref1_parentesco"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #1</ion-label>
                <ion-input
                  formControlName="ref1_telf_1"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #2</ion-label>
                <ion-input
                  formControlName="ref1_telf_2"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="ref2">
            <ion-item slot="header" color="light">
              <ion-label>Referencia #2</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">Nombres Completos</ion-label>
                <ion-input
                  formControlName="ref2_nombres"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Parentesco</ion-label>
                <ion-input
                  formControlName="ref2_parentesco"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #1</ion-label>
                <ion-input
                  formControlName="ref2_telf_1"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono #2</ion-label>
                <ion-input
                  formControlName="ref2_telf_2"
                  value=""
                  type="tel"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="ActEconómica">
            <ion-item slot="header" color="light">
              <ion-label>Actividad Económica</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating"
                  >Tipo de Actividad Económica</ion-label
                >
                <ion-select
                  interface="action-sheet"
                  placeholder="Seleccionar"
                  formControlName="trabajo_tipo_actividad"
                >
                  <ion-select-option value="DEP">DEPENDENCIA</ion-select-option>
                  <ion-select-option value="IND"
                    >INDEPENDIENTE</ion-select-option
                  >
                  <ion-select-option value="CES">CESANTE</ion-select-option>
                  <ion-select-option value="INF">INFORMAL</ion-select-option>
                </ion-select>
              </ion-item>
            </div>
          </ion-accordion>

          <ion-accordion value="negocio">
            <ion-item slot="header" color="light">
              <ion-label>Datos Negocio/Trabajo</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-item>
                <ion-label position="floating">RUC</ion-label>
                <ion-input
                  formControlName="trabajo_ruc"
                  value=""
                  type="number"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Nombre</ion-label>
                <ion-input
                  formControlName="trabajo_nombre"
                  value="{{getdata.nombre_empresa_titular}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Provincia</ion-label>
                <ion-input
                  formControlName="trabajo_provincia"
                  value="{{getdata.cod_prov_trabajo_titular}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Cantón/Ciudad</ion-label>
                <ion-input
                  formControlName="trabajo_canton"
                  value="{{getdata.cod_cant_trabajo_titular}}"
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Parroquia</ion-label>
                <ion-input
                  formControlName="trabajo_parroquia"
                  value="{{getdata.cod_parr_trabajo_titular}}"
                  type="text"
                ></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Barrio</ion-label>
                <ion-input
                  formControlName="trabajo_barrio"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Dirección</ion-label>
                <ion-input
                  formControlName="trabajo_direccion"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Número</ion-label>
                <ion-input
                  formControlName="trabajo_numero"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Calle Transversal</ion-label>
                <ion-input
                  formControlName="trabajo_calle_transversal"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Referencia Ubicacion</ion-label>
                <ion-input
                  formControlName="trabajo_ref_ubicacion"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Teléfono</ion-label>
                <ion-input
                  formControlName="trabajo_telefono"
                  value=""
                  type="text"
                ></ion-input>
              </ion-item>

              <ion-item>
                <ion-label position="floating">Antigüedad</ion-label>
                <ion-input
                  formControlName="trabajo_antiguedad"
                  value="{{getdata.antiguedad_lab}}"
                  type="number"
                ></ion-input>
              </ion-item>
            </div>
          </ion-accordion>
        </ion-accordion-group>
        <ion-button
          [disabled]="dataForm.invalid"
          expand="block"
          color="primary"
          type="submit"
        >
          Realizar Gestion
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>
